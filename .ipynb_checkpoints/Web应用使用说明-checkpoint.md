# 轴承故障诊断与剩余寿命预测 Web 系统使用说明

## 📋 系统概述

本系统是一个基于Web的轴承故障诊断与剩余寿命预测平台，实现了智能算法在工业设备健康管理中的完整应用流程。

### 主要功能模块

1. **数据接入与处理** - 支持振动数据上传和预处理
2. **算法模型训练** - 支持4种诊断算法和2种预测算法
3. **故障诊断** - 实时故障检测与分类
4. **剩余寿命预测** - RUL预测和健康评估
5. **设备管理** - 设备信息管理
6. **模型管理** - 模型版本控制
7. **历史记录** - 诊断和预测历史查询

### 支持的智能算法

#### 故障诊断算法（4种）
1. **1D-CNN** - 一维卷积神经网络，适合振动信号模式识别
2. **LSTM** - 长短期记忆网络，捕捉时序依赖关系
3. **GRU** - 门控循环单元，轻量级时序模型
4. **Random Forest** - 随机森林，基于特征工程的机器学习方法

#### 剩余寿命预测算法（2+种）
1. **LSTM-RUL** - 基于LSTM的深度学习RUL预测
2. **CNN-RUL** - 基于CNN的RUL预测
3. **Rule-based RUL** - 基于规则的RUL估算（无需训练）

## 🚀 快速开始

### 1. 安装依赖

```bash
# 安装Web应用依赖
pip install -r requirements_web.txt
```

### 2. 启动服务器

```bash
# 本地运行
python web_app.py

# 服务器运行（指定端口）
python web_app.py --port 5000
```

### 3. 访问系统

打开浏览器访问：`http://localhost:5000`

在服务器上运行时，使用服务器IP地址：`http://your_server_ip:5000`

## 📖 使用流程

### 第一步：数据准备

1. 进入 **数据管理** 页面
2. 上传训练数据集：
   - 点击"上传训练数据集"
   - 输入数据集名称（如：bearings_dataset）
   - 选择多个.mat文件（至少包含10个类别的数据）
   - 点击"开始上传"
3. 记录数据集路径，用于后续训练

### 第二步：模型训练

1. 进入 **模型训练** 页面
2. 选择模型类型：
   - **1D-CNN**：推荐用于初学者，训练快速（约2-5分钟）
   - **LSTM**：适合复杂模式，训练时间较长（约10-20分钟）
   - **GRU**：LSTM的轻量版本
   - **Random Forest**：传统机器学习方法
3. 配置训练参数：
   ```
   训练数据路径：./uploads/20240101_120000_bearings_dataset
   信号长度：2048（深度学习）或 500（随机森林）
   样本数量：1000
   批次大小：128
   训练轮数：20（CNN）或 60（LSTM/GRU）
   ```
4. 点击"开始训练"
5. 等待训练完成，查看结果：
   - 测试准确率
   - 训练曲线（损失和准确率）
   - 混淆矩阵
   - 分类报告

### 第三步：故障诊断

1. 进入 **故障诊断** 页面
2. 选择已训练的诊断模型
3. 上传待诊断的数据文件（.mat格式）
4. 点击"开始诊断"
5. 查看诊断结果，系统会识别以下故障类型：
   - 正常状态
   - 内圈故障（3种严重程度）
   - 外圈故障（3种严重程度）
   - 滚动体故障（3种严重程度）

### 第四步：剩余寿命预测

1. 进入 **寿命预测** 页面
2. 选择RUL预测模型（或使用基于规则的估算）
3. 上传设备运行数据
4. 点击"开始预测"
5. 查看预测结果：
   - **剩余使用寿命**（小时）
   - **健康指数**（0-100分）
   - **设备状态**（健康/良好/警告/危险/严重故障）
   - **置信度**

### 第五步：设备管理

1. 进入 **设备管理** 页面
2. 添加设备信息：
   - 设备名称
   - 设备类型
   - 安装位置
3. 查看所有设备状态
4. 对设备进行诊断和预测

### 第六步：查看历史

1. 进入 **历史记录** 页面
2. 查看诊断历史记录
3. 查看RUL预测历史记录
4. 导出数据用于报告

## 🎯 典型应用场景

### 场景1：新设备上线
1. 收集正常运行数据
2. 上传数据集并训练基准模型
3. 定期诊断，建立健康档案

### 场景2：故障预警
1. 定期上传设备运行数据
2. 使用诊断模型检测异常
3. 使用RUL模型评估剩余寿命
4. 及时安排维护

### 场景3：故障分析
1. 收集故障设备数据
2. 使用训练好的模型诊断
3. 查看历史趋势分析故障原因
4. 优化维护策略

## 📊 数据格式说明

### 输入数据格式
- 文件格式：.mat（MATLAB格式）
- 数据内容：包含振动加速度信号
- 键值要求：包含"DE"（驱动端）字段
- 采样率：建议12kHz或48kHz

### 训练数据集结构
```
dataset_folder/
├── normal_0_97.mat              # 正常状态
├── 48k_Drive_End_B007_0_122.mat # 滚动体故障 0.007"
├── 48k_Drive_End_B014_0_189.mat # 滚动体故障 0.014"
├── 48k_Drive_End_B021_0_226.mat # 滚动体故障 0.021"
├── 48k_Drive_End_IR007_0_109.mat # 内圈故障 0.007"
├── 48k_Drive_End_IR014_0_174.mat # 内圈故障 0.014"
├── 48k_Drive_End_IR021_0_213.mat # 内圈故障 0.021"
├── 48k_Drive_End_OR007@6_0_135.mat # 外圈故障 0.007"
├── 48k_Drive_End_OR014@6_0_201.mat # 外圈故障 0.014"
└── 48k_Drive_End_OR021@6_0_238.mat # 外圈故障 0.021"
```

## 🔧 高级配置

### 训练参数调优

#### 1D-CNN（推荐新手）
```
信号长度：2048
批次大小：128
训练轮数：20
```

#### LSTM/GRU（高精度）
```
信号长度：2048
批次大小：64
训练轮数：60
数据增强：开启
```

#### Random Forest（快速）
```
信号长度：500
样本数量：1000
```

### 服务器部署

#### 使用Gunicorn（生产环境）
```bash
pip install gunicorn
gunicorn -w 4 -b 0.0.0.0:5000 web_app:app
```

#### 使用Nginx反向代理
```nginx
server {
    listen 80;
    server_name your_domain.com;
    
    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

#### 使用Docker
```bash
# 构建镜像
docker build -t bearing-diagnosis .

# 运行容器
docker run -d -p 5000:5000 -v ./models:/app/models bearing-diagnosis
```

## ⚠️ 注意事项

1. **训练时间**
   - CNN模型：约2-5分钟（20轮）
   - LSTM/GRU：约10-30分钟（60轮）
   - GPU加速可显著缩短训练时间

2. **内存要求**
   - 最小：4GB RAM
   - 推荐：8GB RAM以上
   - GPU：推荐NVIDIA GPU + CUDA

3. **数据质量**
   - 确保数据采样率一致
   - 每类至少1000个样本
   - 数据需要包含完整的故障信息

4. **模型选择**
   - 实时性要求高：选择1D-CNN
   - 准确率要求高：选择LSTM
   - 计算资源有限：选择Random Forest

## 🐛 常见问题

### Q1: 训练失败怎么办？
**A**: 检查以下几点：
- 数据路径是否正确
- 数据文件是否完整
- 是否有足够的内存
- 检查错误日志

### Q2: 诊断准确率低怎么办？
**A**: 尝试以下方法：
- 增加训练数据量
- 增加训练轮数
- 启用数据增强
- 尝试其他模型

### Q3: 如何提高RUL预测准确性？
**A**: 建议：
- 收集设备全生命周期数据
- 训练专门的RUL模型
- 定期更新模型
- 结合多种预测方法

### Q4: 支持哪些浏览器？
**A**: 推荐使用：
- Chrome 90+
- Firefox 88+
- Edge 90+
- Safari 14+

## 📞 技术支持

如有问题，请查看：
- 项目README.md
- 快速修复指南.md
- 服务器运行指南.md

## 📄 许可证

本项目仅供学习和研究使用。

---

**系统版本**: 1.0.0  
**更新日期**: 2024年10月4日  
**开发团队**: 智能诊断实验室

